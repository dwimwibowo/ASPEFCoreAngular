"use strict";(self.webpackChunkdutch_app=self.webpackChunkdutch_app||[]).push([["main"],{213:(l,h,c)=>{var Z=c(313),t=c(223),T=c(520),d=c(118),a=c(382);let m=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["the-shop"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[d.lC],encapsulation:2}),r})();var A=c(4),_=c(489);class q{constructor(){this.orderDate=new Date,this.items=new Array}get subTotal(){return _.sum(_.map(this.items,i=>i.unitPrice*i.quantity))}}class f{}let p=(()=>{class r{constructor(e){this.http=e,this.token="",this.products=[],this.order=new q}loadProducts(){return this.http.get("api/products").pipe((0,A.U)(e=>(this.products=e,!0)))}get loginRequired(){return 0==this.token.length||this.tokenExpiration>new Date}login(e){return this.http.post("account/createtoken",e).pipe((0,A.U)(o=>(this.token=o.token,this.tokenExpiration=o.expiration,!0)))}addToOrder(e){let o=this.order.items.find(s=>s.productId==e.id);o?o.quantity++:(o=new f,o.productId=e.id,o.productCategory=e.category,o.productSize=e.size,o.productTitle=e.title,o.productArtist=e.artist,o.productArtId=e.artId,o.unitPrice=e.price,o.quantity=1,this.order.items.push(o))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(T.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var u=c(808);function v(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t._UZ(2,"img",10),t.TgZ(3,"div",3),t.TgZ(4,"h5",11),t._uU(5),t.qZA(),t.TgZ(6,"div",12),t.TgZ(7,"ul",13),t.TgZ(8,"li"),t.TgZ(9,"strong"),t._uU(10,"Price:"),t.qZA(),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"li"),t.TgZ(14,"strong"),t._uU(15,"Artist:"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"li"),t.TgZ(18,"strong"),t._uU(19,"Title:"),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"li"),t.TgZ(22,"strong"),t._uU(23,"Description:"),t.qZA(),t._uU(24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"button",14),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw().addProduct(n)}),t._uU(26,"Buy"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit;t.xp6(2),t.MGl("src","img/",e.artId,".jpg",t.LSH),t.Q6J("alt",e.title),t.xp6(3),t.AsE("",e.category," - ",e.size,""),t.xp6(6),t.hij(" ",t.Dn7(12,8,e.price,"USD",!0),""),t.xp6(5),t.hij(" ",e.artist,""),t.xp6(4),t.hij(" ",e.title,""),t.xp6(4),t.hij(" ",e.artDescription,"")}}let U=(()=>{class r{constructor(e){this.data=e,this.title="Product List",this.products=[]}ngOnInit(){this.data.loadProducts().subscribe(e=>{e&&(this.products=this.data.products)})}addProduct(e){this.data.addToOrder(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["product-list"]],decls:9,vars:2,consts:[[1,"card","card-gray"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"container-fluid"],[1,"row"],["class","col",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"col"],[1,"card",2,"width","18rem"],[1,"card-img-top",3,"src","alt"],[1,"card-title","text-bold"],[1,"card-text"],[1,"product-props","list-unstyled"],["id","buyButton",1,"btn","btn-success","float-right",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.YNc(7,v,27,12,"div",6),t.qZA(),t.qZA(),t.qZA(),t._UZ(8,"div",7),t.qZA()),2&e&&(t.xp6(3),t.Oqu(o.title),t.xp6(4),t.Q6J("ngForOf",o.products))},directives:[u.sg],pipes:[u.H9],styles:[""]}),r})();function b(r,i){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",8),t._uU(4),t.qZA(),t.TgZ(5,"td",9),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",9),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.qZA()),2&r){const e=i.$implicit;t.xp6(2),t.lnq("",e.productCategory,"(",e.productSize,") - ",e.productTitle,""),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(t.Dn7(7,6,e.unitPrice,"USD",!0)),t.xp6(3),t.Oqu(t.Dn7(10,10,e.unitPrice*e.quantity,"USD",!0))}}function y(r,i){if(1&r&&(t.TgZ(0,"div",6),t.TgZ(1,"table",7),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"Product"),t.qZA(),t.TgZ(6,"th",8),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th",9),t._uU(9,"$"),t.qZA(),t.TgZ(10,"th",9),t._uU(11,"Total"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,b,11,14,"tr",10),t.qZA(),t.qZA(),t.qZA()),2&r){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.data.order.items)}}function x(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCheckout()}),t._uU(1,"Checkout"),t.qZA()}}let C=(()=>{class r{constructor(e,o){this.data=e,this.router=o,this.title="Cart"}onCheckout(){this.router.navigate(this.data.loginRequired?["login"]:["checkout"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p),t.Y36(d.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["cart-list"]],decls:16,vars:9,consts:[[1,"card","card-fuchsia"],[1,"card-header"],[1,"card-title"],["class","card-body",4,"ngIf"],[1,"card-footer"],["routerLink","checkout","class","btn btn-success float-right",3,"click",4,"ngIf"],[1,"card-body"],[1,"table","table-hover","p-0"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],["routerLink","checkout",1,"btn","btn-success","float-right",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,y,14,1,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div"),t.TgZ(7,"strong"),t._uU(8,"# / Items:"),t.qZA(),t._uU(9),t.YNc(10,x,2,0,"button",5),t.qZA(),t.TgZ(11,"div"),t.TgZ(12,"strong"),t._uU(13,"Sub Total:"),t.qZA(),t._uU(14),t.ALo(15,"currency"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(o.title),t.xp6(1),t.Q6J("ngIf",o.data.order.items.length>0),t.xp6(5),t.hij(" ",o.data.order.items.length," "),t.xp6(1),t.Q6J("ngIf",o.data.order.items.length>0),t.xp6(4),t.hij(" ",t.Dn7(15,5,o.data.order.subTotal,"USD",!0),""))},directives:[u.O5,u.sg,d.rH],pipes:[u.H9],encapsulation:2}),r})();function L(r,i){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td",5),t._UZ(2,"img",14),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",5),t._uU(6),t.qZA(),t.TgZ(7,"td",6),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td",6),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.qZA()),2&r){const e=i.$implicit;t.xp6(2),t.MGl("src","/img/",e.productArtId,".jpg",t.LSH),t.xp6(2),t.HOy("",e.productCategory,"(",e.productSize,") - ",e.productArtist,": ",e.productTitle,""),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(t.Dn7(9,8,e.unitPrice,"USD",!0)),t.xp6(3),t.Oqu(t.Dn7(12,12,e.unitPrice*e.quantity,"USD",!0))}}function F(r,i){if(1&r&&(t.TgZ(0,"div",21),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMessage)}}function M(r,i){1&r&&(t.TgZ(0,"div",22),t._uU(1,"Username is required!"),t.qZA())}function D(r,i){1&r&&(t.TgZ(0,"div",22),t._uU(1,"Password is required!"),t.qZA())}let S=[{path:"",component:(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["the-shop"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-9"],[1,"col-md-3"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"product-list"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"cart-list"),t.qZA(),t.qZA())},directives:[U,C],encapsulation:2}),r})()},{path:"checkout",component:(()=>{class r{constructor(e){this.data=e,this.title="Confirm Order"}onCheckout(){alert("Doing checkout")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["checkout"]],decls:46,vars:12,consts:[[1,"card","card-fuchsia"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table","table-bordered","table-hover"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"col-md-3","offset-md-9"],[1,"table","table-condensed"],[1,"card-footer"],[1,"float-right"],[1,"btn","btn-success",3,"click"],["routerLink","/",1,"btn","btn-info"],["alt","o.productTitle",1,"img-thumbnail","checkout-thumb",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"table",4),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th",5),t._uU(9,"Product"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"#"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"$"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Total"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"tbody"),t.YNc(19,L,13,16,"tr",7),t.qZA(),t.qZA(),t.TgZ(20,"div",8),t.TgZ(21,"table",9),t.TgZ(22,"tr"),t.TgZ(23,"td",6),t._uU(24,"Sub Total"),t.qZA(),t.TgZ(25,"td",6),t._uU(26),t.ALo(27,"currency"),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",6),t._uU(30,"Shipping"),t.qZA(),t.TgZ(31,"td",6),t._uU(32,"$ 0.00"),t.qZA(),t.qZA(),t.TgZ(33,"tr"),t.TgZ(34,"td",6),t._uU(35,"Total:"),t.qZA(),t.TgZ(36,"td",6),t._uU(37),t.ALo(38,"currency"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",10),t.TgZ(40,"div",11),t.TgZ(41,"button",12),t.NdJ("click",function(){return o.onCheckout()}),t._uU(42,"Complete Purchase"),t.qZA(),t._uU(43,"\xa0 "),t.TgZ(44,"a",13),t._uU(45,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(o.title),t.xp6(16),t.Q6J("ngForOf",o.data.order.items),t.xp6(7),t.Oqu(t.Dn7(27,4,o.data.order.subTotal,"USD",!0)),t.xp6(11),t.Oqu(t.Dn7(38,8,o.data.order.subTotal,"USD",!0)))},directives:[u.sg,d.yS],pipes:[u.H9],styles:[".checkout-thumb[_ngcontent-%COMP%]{max-width:100px}"]}),r})()},{path:"login",component:(()=>{class r{constructor(e,o){this.data=e,this.router=o,this.creds={username:"",password:""},this.errorMessage=""}onLogin(){this.data.login(this.creds).subscribe(e=>{e&&this.router.navigate(0==this.data.order.items.length?[""]:["checkout"])},e=>this.errorMessage="Failed to login")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p),t.Y36(d.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["login"]],decls:29,vars:6,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],[1,"card","card-blue"],[1,"card-header"],[1,"card-title"],["novalidate","",3,"submit"],["theForm","ngForm"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","username",1,"label-control"],["type","text","name","username","id","username","placeholder","Enter Username","required","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["class","text-danger",4,"ngIf"],["for","password",1,"label-control"],["type","password","name","password","id","password","placeholder","Enter Password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"card-footer","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-sign-in-alt"],["routerLink","/",1,"btn","btn-default"],[1,"alert","alert-danger"],[1,"text-danger"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h3",4),t._uU(5,"Please input your identity"),t.qZA(),t.qZA(),t.TgZ(6,"form",5,6),t.NdJ("submit",function(){return o.onLogin()}),t.TgZ(8,"div",7),t.YNc(9,F,2,1,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12,"Username"),t.qZA(),t.TgZ(13,"input",11,12),t.NdJ("ngModelChange",function(n){return o.creds.username=n}),t.qZA(),t.YNc(15,M,2,0,"div",13),t.qZA(),t.TgZ(16,"div",9),t.TgZ(17,"label",14),t._uU(18,"Password"),t.qZA(),t.TgZ(19,"input",15,16),t.NdJ("ngModelChange",function(n){return o.creds.password=n}),t.qZA(),t.YNc(21,D,2,0,"div",13),t.qZA(),t.qZA(),t.TgZ(22,"div",17),t.TgZ(23,"button",18),t._UZ(24,"i",19),t._uU(25," Login"),t.qZA(),t._uU(26,"\xa0 "),t.TgZ(27,"a",20),t._uU(28,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const s=t.MAs(7),n=t.MAs(14),g=t.MAs(20);t.xp6(9),t.Q6J("ngIf",o.errorMessage),t.xp6(4),t.Q6J("ngModel",o.creds.username),t.xp6(2),t.Q6J("ngIf",n.touched&&n.invalid&&n.errors&&n.errors.required),t.xp6(4),t.Q6J("ngModel",o.creds.password),t.xp6(2),t.Q6J("ngIf",g.touched&&g.invalid&&g.errors&&g.errors.required),t.xp6(2),t.Q6J("disabled",s.invalid)}},directives:[a._Y,a.JL,a.F,u.O5,a.Fj,a.Q7,a.JJ,a.On,d.yS],encapsulation:2}),r})()}],w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r,bootstrap:[m]}),r.\u0275inj=t.cJS({providers:[p],imports:[[Z.b2,T.JF,a.u5,d.Bz.forRoot(S,{useHash:!0,enableTracing:!1})]]}),r})();(0,t.G48)(),Z.q6().bootstrapModule(w).catch(r=>console.error(r))}},l=>{l.O(0,["vendor"],()=>l(l.s=213)),l.O()}]);